{% extends 'base.html' %}

{% load static %}

{% block page_title %}Home{% endblock page_title %}

{% block main_content %}
{% for game in games  %}
	<div class="container-fluid game-container-expanded mx-auto p-0">
		<div class="d-flex flex-row align-items-stretch">
			<!-- #region ==== THUMB BOX =============================================================== -->
			<div class="game-thumb-wrapper">
				{% if  game.thumb_img %}
					<img class="img-fluid game-thumb-large-img" src="{{ game.thumb_img.url }}" alt="{{ game.title }} - Cover image">
				{% else %}
					<img src="{% static "img/img_placeholder_244x300.jpg"%}" alt="Empty placeholder - Game cover image is missing">
				{% endif %}
				<div class="pegi-overlay">
					<a href="https://pegi.info/what-do-the-labels-mean" target="_blank">
						<img src="{{ game.pegi.pegi_img.url }}" alt="{{ game.pegi }} age label">
					</a>
				</div>
			</div>
			<!-- #endregion -->

			<!-- #region ==== INFO BOX ================================================================ -->
			<div class="flex-grow-1 game-info-box">
				
				<!-- #region ==== Row 1 - Title ======================================================= -->
				<div class="game-info-row-1 game-title">
					<div class="invisible">
						<h2>{{ game.title }}</h2>
					</div>
					<div class="title-wrapper">
						<span class="game-title-initial-cap">{{ game.title|slice:"1" }}</span>{{game.title|slice:"1:"}}
					</div>
				</div>
				<!-- #endregion -->
				<!-- #region ==== Row 2 - Date, Platforms, Dev/Publ, Tags ============================= -->
				<div class="d-flex flex-row game-info-row-2 mt-2">
					<div class="d-flex flex-column flex-grow-1">
						<!-- #region ++++ Date ++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
						<div class="txt-medium">
							<strong>{{ game.release_date }}</strong>
						</div>
						<!-- #endregion -->
						<!-- #region ++++ Plattforms ++++++++++++++++++++++++++++++++++++++++++++++++++ -->
						<div class="txt-small">
							<span>
								{% for platform in game.platforms.all %}
								{% if platform.show_icon %}
									{{ platform.icon | safe }}
								{% elif platform.show_img %}
									<img class="platform-icon-image" src="{{ platform.img.url }}" alt="">
								{% endif %}
									{{ platform.short_name}}
								{% endfor %}
							</span>
						</div>
						<!-- #endregion -->
						<!-- #region ++++ Dev / Publ ++++++++++++++++++++++++++++++++++++++++++++++++++ -->
						<div class="d-none d-md-block txt-small">
						<span>
							{% if game.developer %}
								{% if game.developer.web_url %}
									<a href="{{ game.developer.web_url }}" target="_blank">Dev: {{ game.developer.short_name }}</a>
								{% else %}
									Dev: {{ game.developer.short_name }}</a> |
								{% endif %}
							{% endif %}
						</span>
							<span>
								{% if game.developer and game.publisher %}
									<br>
								{% endif %}
							</span>
						<span>
							<!-- TODO: Figure out why publisher link does not work  -->
							{% if game.publisher %}
								{% if game.publisher.web_url %}
									<a href="{{ game.developer.web_url }}" target="_blank">Publ: {{ game.publisher.short_name }}</a>
								{% else %}
									Publ: {{ game.publisher.short_name }}</a>
								{% endif %}
							{% endif %}
						</span>
						</div>
						<!-- #endregion -->
					
					</div>
					<!-- #region ++++++++ Tags ++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
					<div class="tags-container mr-2">
						<div class="mb-1  text-right">
							{% for tag in game.genre_tags.all %}
							<span class="ml-1 tag shadow-faint-small tag-genre">
								{% if tag.show_name %}
									{{ tag.short_name }}
								{% endif %}
								{% if tag.show_icon %}
									{{ tag.icon | safe }}
								{% endif %}
							</span>
							{% endfor %}
						</div>
						<div class="mb-1 ml-1 text-right">
							{% for tag in game.theme_tags.all %}
								<span class="ml-2 tag shadow-faint-small tag-theme">
									{% if tag.show_name %}
										{{ tag.short_name }}
									{% endif %}
									{% if tag.show_icon %}
										{{ tag.icon | safe }}
									{% endif %}
								</span>
								
							{% endfor %}
						</div>
						<div class="mb-1  ml-1 text-right">
							{% for tag in game.misc_tags.all %}
								<span class="ml-2 tag shadow-faint-small tag-misc">
									{% if tag.show_name %}
										{{ tag.short_name }}
									{% endif %}
									{% if tag.show_icon %}
										{{ tag.icon | safe }}
									{% endif %}
								</span>
							{% endfor %}
						</div>
					</div>
					<!-- #endregion -->
				</div>
				<!-- #endregion -->
				<!-- #region ==== Row 3 - Score, Reviews ============================================== -->
				<div class="d-flex flex-row game-info-row-3">
					<!-- #region ++++++++ Score ++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
					<div class="score-wrapper">
						<div class="score shadow-bottom-right"><span class="score-text">100%</span></div>
					</div>
					<!-- #endregion -->
					<!-- #region ++++++++ Reviews ++++++++++++++++++++++++++++++++++++++++++++++++++ -->
					<div class="relative-container flex-grow-1 h-100">
						
						<div class="d-flex flex-column h-100 mr-2 shadow-bottom-right reviews-wrapper">
							<div class="h-100 px-2 pt-1 txt-medium">One review ............................</div>
							<div class="h-100 px-2 pt-1 txt-medium">An other review ............................</div>
							<div class="h-100 px-2 pt-1 txt-medium">same same ............................</div>
						</div>
						<!-- #region ++++++++ Button +++++++++++++++++++++++++++++++++++++++++++++++++++ -->
						<div class="expand-button-wrapper mr-2">
							<button class="expand-button" data-id="gameid-1" data-target="reviews-expanded">
								11 More Reviews <i class="fas fa-caret-down icon-downarrow"></i>
							</button>
						</div>
						<!-- #endregion -->
					</div>
					<!-- #endregion -->		
				</div>
				<!-- #endregion -->
				<!-- #region ==== Row 4 - Description ================================================= -->
					<div class="d-flex flex-row align-content-stretch game-info-row-4  description-wrapper">
						<div class="description-text-box pl-3">
							<div>
								<!--TODO: Link not working + handle links where there are none stored -->
								&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
								<span class="description-source">
									<a href="{{ description_src_url.url }}">({{ game.description_src }})</a>
								</span>
								<span class="description-capital">
									{{ game.description|slice:"1" }}
								</span>
									{{ game.description|slice:"1:" }}	
							</div>
							<div class="description-bottom-cover"></div>
							<div class="description-end-dots">...</div>
							
						</div>					
					</div>
				<!-- #endregion -->
			</div>
			<!-- #endregion -->
		</div>
		<!-- #region ======== GAME FOOTER ============================================================= -->
		<div class="d-flex flex-row shadow-inside-up game-footer-box">
			<div class="d-flex flex-grow-1 stores">

			
			</div>
			<div>
				<button class="details-button" data-id="gameid-1" data-target="reviews-expanded">
					<span class="read-more-txt">(...read more)</span><span class="details-txt"> Game Details <i class="fas fa-caret-right icon-rightarrow"></i></span>
				</button>
			</div>	
		</div>
		<!-- #endregion -->
	</div>

{% endfor %}
{% endblock %}